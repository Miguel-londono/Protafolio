---
import maleta from "../assets/img/maleta.png";
import cv from "../assets/svg/CV.svg";
import ButtonToggle from "./ButtonToggle.astro";
---
<header id="header" class="sticky top-0 z-10 dark:bg-gray-950 bg-gray-300 sm:ml-64 dark:text-slate-50 ">
    <div class="p-4 absolute left-0">
        <ButtonToggle/>
    </div>
    <section class="fade-in max-w-5xl mx-auto">
      <div class="p-4 absolute right-0">
        <button
          id="mobile-open-button"
          class="text-3xl sm:hidden focus:outline-none"
          >&#9776
        </button>
      </div>
      <div
        class="flex flex-col-reverse justify-between p-4 gap-4 sm:flex-row items-center sm:gap-8"
      >
        <div>
          <p>Hey there 游녦</p>
          <div class="flex flex-row gap-2 sm:gap-3 sm:items-center">
            <h1 class="text-xl sm:text-3xl font-bold flex-grow">
              Hey, Soy Miguel londo침o
            </h1>
            <a
              href="CV-Miguel-Londo침o.pdf"
              type="downland"
              target="_blank"
              class="px-3 flex items-center p-1 gap-3 transition ease-in-out hover:scale-[101%] hover:opacity-80 cursor-pointer bg-slate-600 rounded-lg"
            >
              <img
                src={cv.src}
                alt="gitHub"
                class="w-4 h-4 sm:w-6 sm:h-6 dark:invert"
              />
              <span class="text-[11px]"> Download CV </span>
            </a>
          </div>
          <h2 class="text-sm sm:text-base">
            Desarrollador Web full stack en formacion, Especialociado en crear
            aplicaciones y soluciones unicas.
          </h2>
        </div>
        <img
          src={maleta.src}
          alt="maleta"
          class="w-24 h-24 sm:w-36 sm:h-36 p-3"
        />
      </div>
    </section>
  </header>
  
  <script>
    const header = document.getElementById("header");
    const heyThere = header.querySelector("p");
    const description = header.querySelector("h2");
    const image = header.querySelector("img[alt='maleta']");
  
    window.addEventListener("scroll", () => {
      const scrollY = window.scrollY; // Obtiene la posici칩n del scroll
      const maxScroll = 150; // Altura m치xima antes de ocultar completamente
  
      // Calcula el porcentaje basado en el desplazamiento
      const opacity = Math.max(0, 1 - scrollY / maxScroll); // Opacidad de los elementos
      const height = Math.max(70, 200 - scrollY); // Ajusta el alto del header (m칤nimo 70px)
  
      // Ajusta el alto del header
      header.style.height = `${height}px`;
      header.style.overflow = "hidden";
      header.style.transition = "height 0.3s ease";
  
      // Oculta gradualmente los elementos internos
      heyThere.style.opacity = opacity;
      heyThere.style.transform = `translateY(${scrollY / 5}px)`; // Desplaza ligeramente
      heyThere.style.transition = "opacity 0.3s ease, transform 0.3s ease";
  
      description.style.opacity = opacity;
      description.style.transform = `translateY(${scrollY / 5}px)`;
      description.style.transition = "opacity 0.3s ease, transform 0.3s ease";
  
      image.style.opacity = opacity;
      image.style.transform = `translateY(${scrollY / 5}px)`;
      image.style.transition = "opacity 0.3s ease, transform 0.3s ease";
  
      // Si el scroll es mayor al m치ximo, oculta completamente los elementos internos
      if (scrollY >= maxScroll) {
        heyThere.style.display = "none";
        description.style.display = "none";
        image.style.display = "none";
      } else {
        heyThere.style.display = "block";
        description.style.display = "block";
        image.style.display = "block";
      }
    });
  </script>
  